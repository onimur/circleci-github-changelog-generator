description: |
  Save parameters to /tmp/your-dir/temp
parameters:
  dir:
    default: automate
    description: |
      Directory created in the tmp folder to store files or directories.
    type: string
  file-or-dir:
    description: |
      The file or directory you want to store.
    type: string
  store-artifacts:
    default: false
    description: |
      If you want to send to the artifact storage.
    type: boolean

steps:
  - run:
      name: Save <<parameters.file-or-dir>> to /tmp/<<parameters.dir>>/temp
      command: |
        path_dir="/tmp/<<parameters.dir>>/temp/"
        mkdir -p $path_dir
        # find -iname '<<parameters.file-or-dir>>' -exec cp {} .${path_dir}/ \;
        if [[ -d <<parameters.file-or-dir>> ]]; then
          echo "<<parameters.file-or-dir>> is a directory"
          cp -r <<parameters.file-or-dir>> $path_dir
        #
        elif [[ -f <<parameters.file-or-dir>> ]]; then
          echo "<<parameters.file-or-dir>> is a file"
          cp <<parameters.file-or-dir>> $path_dir
        fi
        #
        find .
  - persist_to_workspace:
      root: /tmp/<<parameters.dir>>
      paths:
        - temp/
  - run:
      name: Parameters save
      command: |
        find .
        echo "parameters save in: /tmp/<<parameters.dir>>/temp"
  - when:
      condition: <<parameters.store-artifacts>>
      steps:
        - store_artifacts:
            path: /tmp/<<parameters.dir>>/temp
