description: |
  Save parameters to /tmp/your-dir/temp
parameters:
  dir:
    default: automate
    description: |
      Directory created in the tmp folder to store files or directories.
    type: string
  file-or-dir:
    description: |
      The file or directory you want to store.
    type: string
  store-artifacts:
    default: false
    description: |
      If you want to send to the artifact storage.
    type: boolean

steps:
  - run:
      name: Save <<parameters.file-or-dir>> to /tmp/<<parameters.dir>>/temp
      command: |
        echo 'export PATH_DIR="/tmp/<<parameters.dir>>/temp/"' >> $BASH_ENV
        mkdir -p "${PATH_DIR}"
        # find -iname '<<parameters.file-or-dir>>' -exec cp {} .${PATH_DIR}/ \;
        if [[ -d "<<parameters.file-or-dir>>" ]]; then
          echo "<<parameters.file-or-dir>> is a directory"
          cp -r <<parameters.file-or-dir>> $PATH_DIR
        elif [[ -f "<<parameters.file-or-dir>>" ]]; then
          echo "<<parameters.file-or-dir>> is a file"
          cp <<parameters.file-or-dir>> $PATH_DIR
        fi
  - persist_to_workspace:
      root: /tmp/<<parameters.dir>>
      paths:
        - temp/
  - run:
      name: Parameters save
      command: |
        echo "parameters save in: $PATH_DIR"
  - when:
      condition: <<parameters.store-artifacts>>
      steps:
        - store_artifacts:
            path: "${PATH_DIR}"
