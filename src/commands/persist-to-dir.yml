description: |
  Save parameters to /your-dir/tmp
parameters:
  dir:
    default: ${CIRCLE_PROJECT_USERNAME}
    description: |
      Directory created in the tmp folder to store files or directories.
    type: string
  file-or-dir:
    description: |
      The file or directory you want to store.
    type: string
  store-artifacts:
    default: false
    description: |
      If you want to send to the artifact storage.
    type: boolean

steps:
  - run:
      name: Save <<parameters.file-or-dir>> to /<<parameters.dir>>/tmp
      command: |
        path_dir="/<<parameters.dir>>/tmp"
        mkdir -p $(dirname ${path_dir})
        # find -iname '<<parameters.file-or-dir>>' -exec cp {} .${path_dir}/ \;
        cp -r <<parameters.file-or-dir>> ${path_dir}/
  - persist_to_workspace:
      root: /<<parameters.dir>>
      paths:
        - tmp
  - run:
      name: Parameters save
      command: |
        echo "parameters save in: /<<parameters.dir>>/tmp"
  - when:
      condition: <<parameters.store-artifacts>>
      steps:
        - store_artifacts:
            path: /<<parameters.dir>>/tmp
